/* Accessibility Enhancements */

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --primary: 0 0% 0%;
    --primary-content: 0 0% 100%;
    --secondary: 0 0% 20%;
    --secondary-content: 0 0% 100%;
    --accent: 0 0% 30%;
    --accent-content: 0 0% 100%;
    --neutral: 0 0% 10%;
    --neutral-content: 0 0% 100%;
    --base-100: 0 0% 100%;
    --base-200: 0 0% 95%;
    --base-300: 0 0% 90%;
    --base-content: 0 0% 0%;
    --info: 200 100% 30%;
    --info-content: 0 0% 100%;
    --success: 120 100% 25%;
    --success-content: 0 0% 100%;
    --warning: 45 100% 35%;
    --warning-content: 0 0% 100%;
    --error: 0 100% 35%;
    --error-content: 0 0% 100%;
  }
}

/* High contrast code syntax highlighting */
@media (prefers-contrast: high) {
  .hljs {
    background: #ffffff !important;
    color: #000000 !important;
  }

  .hljs-keyword,
  .hljs-selector-tag,
  .hljs-built_in {
    color: #000080 !important;
    font-weight: bold !important;
  }

  .hljs-string,
  .hljs-attr {
    color: #008000 !important;
    font-weight: bold !important;
  }

  .hljs-comment {
    color: #808080 !important;
    font-style: italic !important;
  }

  .hljs-number,
  .hljs-literal {
    color: #800080 !important;
    font-weight: bold !important;
  }

  .hljs-tag {
    color: #000080 !important;
    font-weight: bold !important;
  }

  .hljs-name {
    color: #800000 !important;
    font-weight: bold !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .animate-spin {
    animation: none !important;
  }

  .transition-all,
  .transition-colors,
  .transition-opacity,
  .transition-shadow,
  .transition-transform {
    transition: none !important;
  }
}

/* Focus indicators */
.focus-visible:focus-visible,
.focus\:outline-none:focus-visible {
  outline: 2px solid hsl(var(--primary)) !important;
  outline-offset: 2px !important;
}

/* Enhanced focus for interactive elements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
[tabindex]:focus-visible {
  outline: 2px solid hsl(var(--primary)) !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 4px hsl(var(--primary) / 0.2) !important;
}

/* Skip links */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: hsl(var(--primary));
  color: hsl(var(--primary-content));
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  font-weight: bold;
}

.skip-link:focus {
  top: 6px;
}

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Accessible form labels */
.form-control label {
  cursor: pointer;
}

.form-control input:focus + label,
.form-control textarea:focus + label,
.form-control select:focus + label {
  color: hsl(var(--primary));
}

/* Accessible button states */
.btn:disabled,
.btn[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn:disabled:hover,
.btn[disabled]:hover {
  transform: none !important;
}

/* Accessible modal */
.modal[aria-hidden="true"] {
  display: none !important;
}

.modal[aria-hidden="false"] {
  display: flex !important;
}

/* Accessible dropdown */
.dropdown-content[aria-hidden="true"] {
  display: none !important;
}

.dropdown-content[aria-hidden="false"] {
  display: block !important;
}

/* Accessible tabs */
.tab[aria-selected="true"] {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-content));
}

.tab[aria-selected="false"] {
  background-color: transparent;
  color: hsl(var(--base-content));
}

/* Accessible collapse */
.collapse-title[aria-expanded="true"]::after {
  transform: rotate(90deg);
}

.collapse-title[aria-expanded="false"]::after {
  transform: rotate(0deg);
}

/* High contrast borders */
@media (prefers-contrast: high) {
  .card,
  .btn,
  .input,
  .textarea,
  .select,
  .modal-box,
  .dropdown-content {
    border: 2px solid hsl(var(--base-content)) !important;
  }

  .btn-primary {
    background-color: #000000 !important;
    color: #ffffff !important;
    border-color: #000000 !important;
  }

  .btn-secondary {
    background-color: #333333 !important;
    color: #ffffff !important;
    border-color: #333333 !important;
  }

  .btn-outline {
    background-color: transparent !important;
    color: #000000 !important;
    border-color: #000000 !important;
  }

  .btn-outline:hover {
    background-color: #000000 !important;
    color: #ffffff !important;
  }
}

/* Accessible color indicators */
.badge-success::before,
.alert-success::before {
  content: "✓ ";
  font-weight: bold;
}

.badge-warning::before,
.alert-warning::before {
  content: "⚠ ";
  font-weight: bold;
}

.badge-error::before,
.alert-error::before {
  content: "✗ ";
  font-weight: bold;
}

.badge-info::before,
.alert-info::before {
  content: "ℹ ";
  font-weight: bold;
}

/* Accessible loading states */
.loading::after {
  content: "Loading...";
  position: absolute;
  left: -9999px;
}

/* Accessible progress indicators */
.progress[value]::after {
  content: attr(value) "% complete";
  position: absolute;
  left: -9999px;
}

/* Touch target sizing */
@media (pointer: coarse) {
  .btn,
  .tab,
  .dropdown-toggle,
  .collapse-title,
  input[type="checkbox"],
  input[type="radio"] {
    min-height: 44px;
    min-width: 44px;
  }

  .btn-xs {
    min-height: 44px;
    min-width: 44px;
    padding: 0.75rem;
  }

  .btn-sm {
    min-height: 44px;
    min-width: 44px;
    padding: 0.75rem 1rem;
  }
}

/* Keyboard navigation indicators */
.keyboard-navigation .btn:focus,
.keyboard-navigation .tab:focus,
.keyboard-navigation .dropdown-toggle:focus {
  outline: 3px solid hsl(var(--primary)) !important;
  outline-offset: 2px !important;
}

/* Accessible text sizing */
@media (prefers-reduced-data: reduce) {
  .image-responsive {
    display: none;
  }

  .image-responsive::after {
    content: "[Image: " attr(alt) "]";
    display: block;
    padding: 1rem;
    background: hsl(var(--base-200));
    border: 1px solid hsl(var(--base-300));
    text-align: center;
    font-style: italic;
  }
}

/* Accessible animations */
.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@media (prefers-reduced-motion: reduce) {
  .animate-pulse {
    animation: none;
    opacity: 0.5;
  }
}

/* Accessible form validation */
.input:invalid,
.textarea:invalid,
.select:invalid {
  border-color: hsl(var(--error));
  box-shadow: 0 0 0 2px hsl(var(--error) / 0.2);
}

.input:invalid:focus,
.textarea:invalid:focus,
.select:invalid:focus {
  outline-color: hsl(var(--error));
}

/* Accessible error messages */
.error-message {
  color: hsl(var(--error));
  font-size: 0.875rem;
  margin-top: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.error-message::before {
  content: "⚠";
  font-weight: bold;
}

/* Accessible success messages */
.success-message {
  color: hsl(var(--success));
  font-size: 0.875rem;
  margin-top: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.success-message::before {
  content: "✓";
  font-weight: bold;
}

/* Accessible table headers */
th {
  font-weight: bold;
  text-align: left;
}

th[scope="col"] {
  background-color: hsl(var(--base-200));
}

th[scope="row"] {
  background-color: hsl(var(--base-100));
  font-weight: bold;
}

/* Accessible list styling */
ul[role="list"],
ol[role="list"] {
  list-style: none;
  padding: 0;
}

ul[role="list"] li::before {
  content: "• ";
  color: hsl(var(--primary));
  font-weight: bold;
  margin-right: 0.5rem;
}

ol[role="list"] {
  counter-reset: list-counter;
}

ol[role="list"] li {
  counter-increment: list-counter;
}

ol[role="list"] li::before {
  content: counter(list-counter) ". ";
  color: hsl(var(--primary));
  font-weight: bold;
  margin-right: 0.5rem;
}

/* Accessible breadcrumbs */
.breadcrumbs ol {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.breadcrumbs li:not(:last-child)::after {
  content: "/";
  margin-left: 0.5rem;
  color: hsl(var(--base-content) / 0.5);
}

.breadcrumbs a {
  text-decoration: underline;
}

.breadcrumbs a:hover {
  text-decoration: none;
}

/* Accessible pagination */
.pagination {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.pagination .btn[aria-current="page"] {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-content));
  font-weight: bold;
}

/* Accessible tooltips */
.tooltip {
  position: relative;
}

.tooltip[data-tip]::before {
  content: attr(data-tip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: hsl(var(--base-content));
  color: hsl(var(--base-100));
  padding: 0.5rem;
  border-radius: 0.25rem;
  font-size: 0.875rem;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  z-index: 1000;
}

.tooltip:hover::before,
.tooltip:focus::before {
  opacity: 1;
}

@media (prefers-reduced-motion: reduce) {
  .tooltip::before {
    transition: none;
  }
}
