import{S as d,i as m,s as f,A as c,a as _,t as u,b as g,m as h,l as $,p as y,B as p,C as b,D as S,E as w,F}from"./D7cgMQgG.js";import{g as v,a as I}from"./ClgeGvnK.js";import"./IHki7fMi.js";import{I as k}from"./DsNLi6AI.js";import{a as n}from"./DjzGHUaI.js";function C(r){let e;const t=r[2].default,s=b(t,r,r[3],null);return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,a){s&&s.m(o,a),e=!0},p(o,a){s&&s.p&&(!e||a&8)&&S(s,t,o,o[3],e?F(t,o[3],a,null):w(o[3]),null)},i(o){e||(g(s,o),e=!0)},o(o){u(s,o),e=!1},d(o){s&&s.d(o)}}}function U(r){let e,t;const s=[{name:"link"},r[1],{iconNode:r[0]}];let o={$$slots:{default:[C]},$$scope:{ctx:r}};for(let a=0;a<s.length;a+=1)o=c(o,s[a]);return e=new k({props:o}),{c(){y(e.$$.fragment)},l(a){$(e.$$.fragment,a)},m(a,i){h(e,a,i),t=!0},p(a,[i]){const l=i&3?v(s,[s[0],i&2&&I(a[1]),i&1&&{iconNode:a[0]}]):{};i&8&&(l.$$scope={dirty:i,ctx:a}),e.$set(l)},i(a){t||(g(e.$$.fragment,a),t=!0)},o(a){u(e.$$.fragment,a),t=!1},d(a){_(e,a)}}}function j(r,e,t){let{$$slots:s={},$$scope:o}=e;const a=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}]];return r.$$set=i=>{t(1,e=c(c({},e),p(i))),"$$scope"in i&&t(3,o=i.$$scope)},e=p(e),[a,e,s,o]}class B extends d{constructor(e){super(),m(this,e,j,U,f,{})}}class R{async listFiles(e="/"){return n.get(`/api/storage/objects?path=${encodeURIComponent(e)}`)}async uploadFile(e,t="/",s){return n.upload(`/api/storage/upload?path=${encodeURIComponent(t)}`,e,s)}async downloadFile(e){const t=await fetch(`${n.baseURL}/api/storage/download/${e}`,{headers:{Authorization:`Bearer ${n.token}`}});if(!t.ok)throw new Error("Download failed");return t.blob()}async deleteFile(e){return n.delete(`/api/storage/objects/${e}`)}async deleteFiles(e){return n.post("/api/storage/batch/delete",{ids:e})}async createFolder(e,t="/"){return n.post("/api/storage/folders",{name:e,path:t})}async renameItem(e,t){return n.put(`/api/storage/objects/${e}`,{name:t})}async moveItems(e,t){return n.post("/api/storage/batch/move",{ids:e,destination:t})}async copyItems(e,t){return n.post("/api/storage/batch/copy",{ids:e,destination:t})}async getStorageUsage(){return n.get("/api/storage/quota")}async searchFiles(e){return n.get(`/api/storage/search?q=${encodeURIComponent(e)}`)}async getFilePreview(e){return n.get(`/api/storage/preview/${e}`)}async createShare(e,t){return n.post("/api/storage/shares",{itemId:e,...t})}async getShares(){return n.get("/api/storage/shares")}async revokeShare(e){return n.delete(`/api/storage/shares/${e}`)}async getSharedWithMe(){return n.get("/api/storage/shared-with-me")}}const D=new R;export{B as L,D as s};
