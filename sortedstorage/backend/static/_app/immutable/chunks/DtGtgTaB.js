import{w as h,d as a}from"./kK7WvOrX.js";class d{constructor(){this.notifications=h([]),this.maxNotifications=5,this.defaultDuration=5e3,this.subscribe=this.notifications.subscribe,this.all$=a(this.notifications,s=>s),this.latest$=a(this.notifications,s=>s.slice(0,this.maxNotifications)),this.active$=a(this.notifications,s=>s.filter(i=>i.dismissible!==!1||!i.progress)),this.progress$=a(this.notifications,s=>s.filter(i=>i.progress!==void 0))}show(s){const i=crypto.randomUUID(),t={id:i,type:s.type||"info",title:s.title,message:s.message,duration:s.duration??this.defaultDuration,dismissible:s.dismissible??!0,action:s.action,progress:s.progress,timestamp:new Date};return this.notifications.update(e=>{const r=[t,...e],o=r.filter(u=>!u.progress),f=r.filter(u=>u.progress);return o.length>this.maxNotifications?[...o.slice(0,this.maxNotifications),...f]:r}),t.duration&&t.duration>0&&!t.progress&&setTimeout(()=>this.dismiss(i),t.duration),i}success(s,i,t){return this.show({type:"success",title:s,message:i,duration:t})}error(s,i,t){return this.show({type:"error",title:s,message:i,duration:t??1e4})}warning(s,i,t){return this.show({type:"warning",title:s,message:i,duration:t})}info(s,i,t){return this.show({type:"info",title:s,message:i,duration:t})}progress(s,i,t,e){const r=this.findProgressNotification(s);return r?(this.updateProgress(r,i,t,e),r):this.show({type:"info",title:s,message:e,duration:0,dismissible:!1,progress:{value:i,total:t}})}updateProgress(s,i,t,e){this.notifications.update(r=>r.map(o=>o.id===s&&o.progress?{...o,message:e??o.message,progress:{value:i,total:t}}:o)),i>=t&&setTimeout(()=>{this.notifications.update(r=>r.map(o=>o.id===s?{...o,type:"success",dismissible:!0}:o)),setTimeout(()=>this.dismiss(s),2e3)},500)}action(s,i,t,e){return this.show({type:"info",title:s,message:i,duration:0,action:{label:t,callback:e}})}dismiss(s){this.notifications.update(i=>i.filter(t=>t.id!==s))}dismissAll(){this.notifications.set([])}findProgressNotification(s){let i=null;return this.notifications.subscribe(t=>{const e=t.find(r=>r.title===s&&r.progress);i=(e==null?void 0:e.id)||null})(),i}}const c=new d,g={success:(n,s)=>c.success(s||"Success",n),error:(n,s)=>c.error(s||"Error",n),warning:(n,s)=>c.warning(s||"Warning",n),info:(n,s)=>c.info(s||"Info",n)};export{c as n,g as t};
